webpackJsonp([6],{"1bRC":function(t,s,e){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var i=e("4YfN"),a=e.n(i),n=e("2bvH"),o={name:"",data:function(){return{show:!1,show1:!1,show2:!1,msgList:[],page:1,total:10,loading:!1,finished:!1,editOrderId:""}},components:{},methods:a()({},Object(n.b)(["getMerId","getUserId"]),Object(n.c)(["setBackName"]),{init:function(){var t={merId:this.getMerId()};this.page=0,this.total=10,this.getMsgList(t)},getMsgList:function(t){var s=this,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this.$http.getMerMessage(t).then(function(t){if(s.loading=!0,t&&1===t.code){var i=t.data.order;s.msgList=1==e?i:s.msgList.concat(i),s.msgList=s.msgList.filter(function(t){return 0!=t.status||(new Date).valueOf()-1e3*t.createTime<6e5})}var a=t.data.total;s.total>=a&&(s.finished=!0),s.loading=!1})},onLoading:function(){this.page=this.page+1,this.total=this.total+10;var t={merId:this.getMerId(),page:this.page};this.getMsgList(t,this.page)},MerAgreeRefund:function(){var t=this,s={promoter:2,orderId:this.editOrderId,userId:this.getUserId()};this.$http.MerAgreeRefund(s).then(function(s){t.$toast.success("已确认退货申请"),t.show=!1;var e=null;e=setTimeout(function(){t.init(),clearTimeout(e)},1e3)})},ensureRefundCompleted:function(){var t=this,s={promoter:2,userId:this.getUserId(),orderId:this.editOrderId};this.$http.userEnsureRefund(s).then(function(s){t.$toast.success("已确认退货完成"),t.show1=!1;var e=null;e=setTimeout(function(){t.init(),clearTimeout(e)},1e3)})},ensureOrderSend:function(){var t=this,s={merId:this.getMerId(),orderId:this.editOrderId};this.$http.ensureOrderSend(s).then(function(s){t.$toast.success("已确定发货"),t.show2=!1;var e=null;e=setTimeout(function(){t.init(),clearTimeout(e)},1e3)})},delOrder:function(t){var s=this;this.$dialog.confirm({message:"确定删除吗？",confirmButtonColor:"#FFD200"}).then(function(){var e={orderId:t,merId:s.getMerId()};s.$http.MerDelOrder(e).then(function(t){s.$toast.success("删除成功");var e=null;e=setTimeout(function(){s.init(),clearTimeout(e)},1e3)})})}}),mounted:function(){this.setBackName("shop-management"),this.init()}},r={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"message"},[e("van-list",{attrs:{finished:t.finished,"finished-text":"没有更多了","immediate-check":!1},on:{load:t.onLoading},model:{value:t.loading,callback:function(s){t.loading=s},expression:"loading"}},t._l(t.msgList,function(s,i){return e("div",{key:s.id,class:i==t.msgList.length-1?"msg-item msg-item-nomargin":"msg-item"},[e("div",{staticClass:"item-header"},[1==s.status?e("p",{staticClass:"fahuo"},[e("span",[t._v("你有订单需发货")])]):-1==s.status?e("p",{staticClass:"tuihuo"},[e("span",[t._v("有买家找你退货")])]):e("p",{staticClass:"normal"},[e("span",[t._v("订单")])]),t._v(" "),1==s.status||-1==s.status?e("div",{staticClass:"status"},[e("span",[t._v("待处理")])]):2==s.status?e("div",{staticClass:"status"},[e("i",[t._v("配送中")])]):-2==s.status?e("div",{staticClass:"status"},[e("i",[t._v("退货中")])]):3==s.status?e("div",{staticClass:"status"},[t._v("交易成功")]):-3==s.status?e("div",{staticClass:"status"},[t._v("退货完成")]):t._e()]),t._v(" "),e("div",{staticClass:"desc"},[e("div",{staticClass:"desc-img"},[e("img",{attrs:{src:s.productImage}})]),t._v(" "),e("div",{staticClass:"desc-info"},[e("div",{staticClass:"text"},[t._v(t._s(s.productTitle))]),t._v(" "),e("div",{staticClass:"price"},[e("span",[t._v("￥"+t._s(s.payPrice))]),t._v(" "),e("i",[t._v("数量："+t._s(s.number))])]),t._v(" "),e("div",{staticClass:"address"},[e("div",{staticClass:"name"},[e("span",[t._v(t._s(s.name))]),t._v(" "),e("i",[t._v(t._s(s.phone))])]),t._v(" "),e("div",{staticClass:"addressDesc"},[t._v(t._s(s.province)+" "+t._s(s.city)+" "+t._s(s.area)+" "+t._s(s.address))])])])]),t._v(" "),e("div",{staticClass:"edit-btn",on:{click:function(e){t.editOrderId=s.id}}},[1==s.status?e("div",{staticClass:"refund",on:{click:function(s){t.show2=!0}}},[t._v("确认发货")]):-1==s.status?e("div",{staticClass:"refund",on:{click:function(s){t.show=!0}}},[t._v("确认退货")]):-2==s.status?e("div",{staticClass:"refund",on:{click:function(s){t.show1=!0}}},[t._v("完成退货")]):-3==s.status||3==s.status?e("div",{staticClass:"refund",on:{click:function(e){return t.delOrder(s.id)}}},[t._v("删除订单")]):t._e()])])}),0),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"show"}],staticClass:"dialog-confirm"},[e("div",{staticClass:"t-title"},[e("button",{staticClass:"close",on:{click:function(s){t.show=!1}}},[e("van-icon",{attrs:{name:"cross",size:".14rem"}})],1),t._v(" "),e("span",[t._v("确认退货")])]),t._v(" "),t._m(0),t._v(" "),e("div",{staticClass:"ok-btn",on:{click:t.MerAgreeRefund}},[t._v("确 认")])]),t._v(" "),e("van-overlay",{attrs:{show:t.show,"z-index":10}}),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:t.show1,expression:"show1"}],staticClass:"dialog-confirm"},[e("div",{staticClass:"t-title"},[e("button",{staticClass:"close",on:{click:function(s){t.show1=!1}}},[e("van-icon",{attrs:{name:"cross",size:".14rem"}})],1),t._v(" "),e("span",[t._v("完成退货")])]),t._v(" "),t._m(1),t._v(" "),e("div",{staticClass:"ok-btn",on:{click:t.ensureRefundCompleted}},[t._v("确 认")])]),t._v(" "),e("van-overlay",{attrs:{show:t.show1,"z-index":10}}),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:t.show2,expression:"show2"}],staticClass:"dialog-confirm"},[e("div",{staticClass:"t-title"},[e("button",{staticClass:"close",on:{click:function(s){t.show2=!1}}},[e("van-icon",{attrs:{name:"cross",size:".14rem"}})],1),t._v(" "),e("span",[t._v("确认发货")])]),t._v(" "),t._m(2),t._v(" "),e("div",{staticClass:"ok-btn",on:{click:t.ensureOrderSend}},[t._v("确 认")])]),t._v(" "),e("van-overlay",{attrs:{show:t.show2,"z-index":10}})],1)},staticRenderFns:[function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"content"},[s("p",[this._v("同意会员退货申请？")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"content"},[s("p",[this._v("确认完成退款交易？")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"content"},[s("p",[this._v("确认已发货？")])])}]};var c=e("C7Lr")(o,r,!1,function(t){e("L6ik")},"data-v-be1128ae",null);s.default=c.exports},L6ik:function(t,s){}});
webpackJsonp([5],{"2fNm":function(e,t){},mKJK:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=i("4YfN"),n=i.n(o),r=i("2bvH"),s={name:"",data:function(){return{show:!1,titleNull:!1,priceNull:!1,imgError:!1,title:"",price:"",number:0,numberType:"",describe:"",imageUpload:[],productId:"",backName:"",docmHeight:document.documentElement.clientHeight||document.body.clientHeight,showHeight:document.documentElement.clientHeight||document.body.clientHeight,hideShow:!0}},components:{},methods:n()({},Object(r.c)(["setBackName","setProductId"]),Object(r.b)(["getMerId"]),{stopScroll:function(){document.body.addEventListener("touchmove",function(e){(e=e||event).stopPropagation(),e.preventDefault()})},removeStopScroll:function(){document.body.removeEventListener("touchmove",function(e){(e=e||event).stopPropagation(),e.preventDefault()})},upload:function(){var e=this,t=!0;if(""===this.title&&(this.titleNull=!0,t=!1),""!==this.price&&/^(?:0\.\d{0,1}[1-9]|(?!0)\d{1,6}(?:\.\d{0,1}[1-9])?)$/.test(this.price)||(this.priceNull=!0,t=!1),this.imageUpload.length<2&&(this.imgError=!0,t=!1),t){var i={merId:this.getMerId(),title:this.title,price:this.price,number:this.number,numberType:0==this.number||""==this.number?1:2,describe:this.describe,imageUpload:this.imageUpload};this.productId&&(i.productId=this.productId),this.$http.uploadShop(i).then(function(t){e.show=!0})}},afterRead:function(e){}}),mounted:function(){var e=this;this.$nextTick(function(){e.setBackName("shop-management"),window.onresize=function(){e.showHeight=document.documentElement.clientHeight||document.body.clientHeight}})},watch:{showHeight:function(){this.docmHeight>this.showHeight?this.hideShow=!1:this.hideShow=!0}},beforeRouteEnter:function(e,t,i){var o=e.params.id;if(o){var n={productId:o};i(function(e){e.backName=t.name,e.$http.getShopDetail(n).then(function(t){var i=t.data;e.title=i.title,e.price=i.price,e.number=i.number,e.describe=i.describe;var n=[];i.image.forEach(function(e){n.push({url:e})}),e.imageUpload=n,e.productId=o})})}else i(function(e){e.backName=t.name})}},a={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"shop-upload"},[i("div",{staticClass:"sc title"},[i("p",[e._v("标题")]),e._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:e.title,expression:"title"}],attrs:{type:"text",placeholder:"请输入标题"},domProps:{value:e.title},on:{focus:function(t){e.titleNull=!1,e.stopScroll},blur:e.removeStopScroll,input:function(t){t.target.composing||(e.title=t.target.value)}}}),e._v(" "),i("i",{directives:[{name:"show",rawName:"v-show",value:e.titleNull,expression:"titleNull"}]},[e._v("请输入标题!")])]),e._v(" "),i("div",{staticClass:"sc price"},[i("p",[e._v("价格")]),e._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:e.price,expression:"price"}],attrs:{type:"number",placeholder:"￥0.00"},domProps:{value:e.price},on:{focus:function(t){e.priceNull=!1,e.stopScroll},blur:e.removeStopScroll,input:function(t){t.target.composing||(e.price=t.target.value)}}}),e._v(" "),i("i",{directives:[{name:"show",rawName:"v-show",value:e.priceNull,expression:"priceNull"}]},[e._v("请输入正确的价格!")])]),e._v(" "),i("div",{staticClass:"sc inventory"},[e._m(0),e._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:e.number,expression:"number"}],attrs:{type:"number",placeholder:"0"},domProps:{value:e.number},on:{focus:e.stopScroll,blur:e.removeStopScroll,input:function(t){t.target.composing||(e.number=t.target.value)}}})]),e._v(" "),i("div",{staticClass:"sc desc"},[i("p",[e._v("商品描述")]),e._v(" "),i("textarea",{directives:[{name:"model",rawName:"v-model",value:e.describe,expression:"describe"}],attrs:{placeholder:"请输入商品描述"},domProps:{value:e.describe},on:{focus:e.stopScroll,blur:e.removeStopScroll,input:function(t){t.target.composing||(e.describe=t.target.value)}}})]),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:e.hideShow,expression:"hideShow"}],staticClass:"up-footer",on:{click:function(t){e.imgError=!1}}},[i("van-uploader",{attrs:{multiple:"","max-count":5,"preview-size":".6rem","after-read":e.afterRead},model:{value:e.imageUpload,callback:function(t){e.imageUpload=t},expression:"imageUpload"}}),e._v(" "),i("i",{directives:[{name:"show",rawName:"v-show",value:e.imgError,expression:"imgError"}]},[e._v("图片不得少于两张!")])],1),e._v(" "),i("button",{staticClass:"btn-upload",on:{click:e.upload}},[e._v("发布商品")]),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:e.show,expression:"show"}],staticClass:"dialog"},[i("div",{staticClass:"t-title"},[i("button",{staticClass:"close",on:{click:function(t){e.show=!1}}},[i("van-icon",{attrs:{name:"cross",size:".14rem"}})],1),e._v(" "),i("span",[e._v("发布成功")])]),e._v(" "),e._m(1),e._v(" "),i("div",{staticClass:"ok-btn",on:{click:function(t){e.show=!1,e.$router.push("/shop-management")}}},[e._v("确 认")])]),e._v(" "),i("van-overlay",{attrs:{show:e.show}})],1)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("库存("),t("span",[this._v("数字“0”表示不限量)")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"content"},[t("p",[this._v("发布成功，该商品在审核通过后即可分享给好友购买！")]),this._v(" "),t("p",[this._v("审核期间将不可分享，不可编辑！")])])}]};var c=i("C7Lr")(s,a,!1,function(e){i("2fNm")},"data-v-d95fe0f8",null);t.default=c.exports}});
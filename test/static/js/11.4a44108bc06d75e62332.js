webpackJsonp([11],{HcIK:function(e,t){},xzpK:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=s("4YfN"),n=s.n(i),d=s("2bvH"),r={name:"",data:function(){return{num:1,infor:"",productId:"",totalPrice:0,haveAddress:!0,nowAddressInfo:"",docmHeight:document.documentElement.clientHeight||document.body.clientHeight,showHeight:document.documentElement.clientHeight||document.body.clientHeight,hideShow:!0}},components:{},methods:n()({},Object(d.c)(["setBackName"]),Object(d.b)(["getUserId","getProductId"]),{addAddress:function(){this.$router.push({name:"add-address",params:{act:"buy",id:this.$route.params.id}})},onChange:function(e){this.totalPrice=(e*this.infor.price).toFixed(2)},chooseAddress:function(){this.$router.push({name:"my-address",params:{act:"chooseAddress",productId:this.getProductId()}})},createOrder:function(){if(this.haveAddress){var e={userId:this.getUserId(),productId:this.getProductId(),price:this.infor.price,number:this.num,addressId:this.nowAddressInfo.id};this.$http.createOrder(e).then(function(e){e&&e.code}),this.$dialog.alert({message:"余额不足",confirmButtonColor:"#FFD200"}).then(function(){var e=navigator.userAgent,t=(navigator.appVersion,e.indexOf("Android")>-1||e.indexOf("Linux")>-1),s=!!e.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/);t?window.Android.toCharge():s&&window.webkit.messageHandlers.toCharge.postMessage("")})}else this.$toast("\n请填写收货地址\n\n")}}),created:function(){var e=this;if(this.$route.params.selectedAddress)this.haveAddress=!0,this.nowAddressInfo=this.$route.params.selectedAddress;else{var t={userId:this.$store.state.userId};this.$http.getAddressList(t).then(function(t){var s=t.data;0===s.length?e.haveAddress=!1:e.nowAddressInfo=s[0]})}},mounted:function(){var e=this;this.setBackName("detail"),this.productId=this.getProductId(),this.$http.getShopDetail({productId:this.productId}).then(function(t){var s=t.data;e.infor=s,e.totalPrice=e.infor.price}),window.onresize=function(){e.showHeight=document.documentElement.clientHeight||document.body.clientHeight}},watch:{showHeight:function(){this.docmHeight>this.showHeight?this.hideShow=!1:this.hideShow=!0}},beforeRouteEnter:function(e,t,s){s()}},a={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"confirm"},[s("div",{staticClass:"confirm-order"},[s("div",{staticClass:"contact-warp"},[e.haveAddress?s("div",{on:{click:e.chooseAddress}},[s("div",{staticClass:"contact"},[s("span",[e._v(e._s(e.nowAddressInfo.name))]),e._v(" "),s("i",[e._v(e._s(e.nowAddressInfo.phone))])]),e._v(" "),s("div",{class:1==e.nowAddressInfo.default?"default-address":"address"},[e._v(e._s(e.nowAddressInfo.province)+" "+e._s(e.nowAddressInfo.city)+" "+e._s(e.nowAddressInfo.area)+" "+e._s(e.nowAddressInfo.address))])]):s("div",{staticClass:"add-address",on:{click:e.addAddress}},[s("span",[e._v("添加地址")])]),e._v(" "),s("p",{staticClass:"line"}),e._v(" "),s("div",{staticClass:"icon"},[s("van-icon",{attrs:{name:"arrow",color:"#8F959A"}})],1)]),e._v(" "),s("div",{staticClass:"order-shop"},[s("div",{staticClass:"item-header"},[s("div",{staticClass:"shop-name"},[e._v("奔跑的蜗牛")]),e._v(" "),s("div",{staticClass:"right"},[s("van-icon",{attrs:{name:"arrow",size:".14rem"}})],1)]),e._v(" "),s("div",{staticClass:"desc"},[s("div",{staticClass:"desc-img"},[s("img",{attrs:{src:e.infor.headImage}})]),e._v(" "),s("div",{staticClass:"desc-info"},[s("div",{staticClass:"text"},[e._v(e._s(e.infor.title))]),e._v(" "),s("div",{staticClass:"price"},[s("span",[e._v("￥")]),e._v(e._s(e.infor.price&&e.infor.price.split(".")[0])),s("span",[e._v("."+e._s(e.infor.price&&e.infor.price.split(".")[1]))])]),e._v(" "),s("div",{staticClass:"inventory"},[e._v("库存："+e._s(1==e.infor.numberType?"不限量":e.infor.number))])])]),e._v(" "),s("div",{staticClass:"count"},[s("span",[e._v("购买数量")]),e._v(" "),1==e.infor.numberType?s("div",[s("van-stepper",{attrs:{integer:"","input-width":".37rem"},on:{change:e.onChange},model:{value:e.num,callback:function(t){e.num=t},expression:"num"}})],1):s("div",[s("van-stepper",{attrs:{integer:"",max:e.infor.number,"input-width":".37rem",quota:e.infor.number},on:{change:e.onChange},model:{value:e.num,callback:function(t){e.num=t},expression:"num"}})],1)]),e._v(" "),e._m(0),e._v(" "),s("div",{staticClass:"clc"},[s("span",[e._v("共"+e._s(e.num)+"件")]),e._v(" "),s("i",[e._v("小计：")]),e._v(" "),s("em",[e._v("￥"+e._s(e.totalPrice))])])]),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:e.hideShow,expression:"hideShow"}],staticClass:"footer-flag"}),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:e.hideShow,expression:"hideShow"}],staticClass:"order-footer"},[s("span",[e._v("￥"),s("i",[e._v(e._s(parseInt(e.totalPrice)))]),e._v("."+e._s(e.totalPrice.toString().split(".")[1]))]),e._v(" "),s("button",{on:{click:e.createOrder}},[e._v("提交订单")])])])])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"method"},[t("span",[this._v("配送方式")]),this._v(" "),t("i",[this._v("包邮")])])}]};var o=s("C7Lr")(r,a,!1,function(e){s("HcIK")},"data-v-2e5059b0",null);t.default=o.exports}});